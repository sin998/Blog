[TOC]

# 【3D数学基础：图形与游戏开发】笔记 第10章 3D中的方位与角位移 

#  3D中的方向、方位与角位移

## 方向

直观地说,我们知道,物体的“方位”主要描述的是物体的朝向。

向量有“方向”但没有“方位”。无论如何旋转这个向量都等于原来的向量,因为向量的属性只有“大小”,而没有“厚度”和“宽度”。

![image-20210907171734011](https://sin998-blog-image.oss-cn-beijing.aliyuncs.com/images/202109071717707.png)

## 方位与角位移

此物体转动的时候，“方位”发生了变化，称为旋转，旋转的量称为“角位移”。

![image-20210907171843541](https://sin998-blog-image.oss-cn-beijing.aliyuncs.com/images/202109071718743.png)

# 旋转的三种表示方法

![image-20210907172102821](https://sin998-blog-image.oss-cn-beijing.aliyuncs.com/images/202109071721892.png)

## 矩阵

前面已经介绍过了，[点击链接](https://www.cnblogs.com/sin998/p/15228118.html)前往。

## 欧拉角

欧拉角的基本思想是将角位移分解为绕三个互相垂直轴的三个旋转组成的序列。这听起来很复杂,其实它是非常直观的(事实上,易于使用正是它的主要优点之一)。

本书使用“heading-pitch-bank”约定。

有些书籍也使用“yaw（偏航角）、pitch（俯仰角）、roll（翻滚角）”约定。

它们之间的对应关系是：x轴对应heading/yaw、y轴对应pitch/pitch、z轴对应bank/roll。

![image-20210907174904141](https://sin998-blog-image.oss-cn-beijing.aliyuncs.com/images/202109071749241.png)

前面说过欧拉角的基本思想，所以欧拉角旋转需要分三次旋转，每次旋转对应一个轴：

![image-20210907175018009](https://sin998-blog-image.oss-cn-beijing.aliyuncs.com/images/202109071750356.png)

### 万向锁

关于万向锁，这个视频讲的很清楚，[点击前往](https://v.youku.com/v_show/id_XNjk1MTkzMTM2.html)。

这个问题容易在欧拉角插值的时候发生。

正常的时候是这样的：

翻滚角：

![img](https://sin998-blog-image.oss-cn-beijing.aliyuncs.com/images/202109071804894.gif)

俯仰角：

![img](https://sin998-blog-image.oss-cn-beijing.aliyuncs.com/images/202109071805009.jpeg)

偏航角：

![img](https://sin998-blog-image.oss-cn-beijing.aliyuncs.com/images/202109071805015.jpeg)

当ptich轴为±90°时，此时yaw与roll在同一平面，这时对这两个轴施加旋转都不会真正的让物体转动，相当于roll和yaw被锁住了。

![img](https://sin998-blog-image.oss-cn-beijing.aliyuncs.com/images/202109071803683.gif)

万向锁的实质是一个x、y、z轴的层级问题，注意父轴转动的时候里面嵌套着的子轴也会跟着一起转动。

这个问题无论如何都不能真正解决，只能尽力避免，例如：在遇到万向锁问题的时候调整一下旋转的次序。

## 四元数



# 各表示方法的优缺比较

![image-20210907172928087](https://sin998-blog-image.oss-cn-beijing.aliyuncs.com/images/202109071729251.png)

补充说明：

- 易用程度：即直观程度，是否符合人的思维习惯。例如欧拉角就很符合人的思维习惯，人一眼就能看出来它们分别在哪个轴上面旋转了多少度。
- 表达式不唯一：例如在欧拉角中（127°+180°）与127°表达的旋转角度一致。
- 四元数能和矩阵快速转换。
- 欧拉角使用简单插值可能会导致过多旋转，物体将会沿“长弧”旋转。













# 参考资料&原文链接

[猎豹网校：游戏开发之3D数学基础](https://www.bilibili.com/video/BV1ib411K7TK)

[万向锁与欧拉角](https://zhuanlan.zhihu.com/p/74040465)

# 本文标签

`游戏开发`、`3D数学基础：图形与游戏开发`、`Unreal Engine`、`游戏开发基础`、`数学`、`游戏开发数学基础`、`书籍笔记`。

